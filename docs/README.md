# Investment Data Loader Service ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∞–∫—Ü–∏–∏, —Ñ—å—é—á–µ—Ä—Å—ã, –∏–Ω–¥–∏–∫–∞—Ç–∏–≤—ã) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Tinkoff Invest API –∏ PostgreSQL.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 17+
- Maven 3.6+
- PostgreSQL 12+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–º–∏–Ω–∏–º—É–º —Ç–æ–∫–µ–Ω Tinkoff):
```bash
# Windows (PowerShell)
$env:T_INVEST_TOKEN = "<–≤–∞—à_—Ç–æ–∫–µ–Ω>"

# Linux/Mac
export T_INVEST_TOKEN=<–≤–∞—à_—Ç–æ–∫–µ–Ω>
```

2) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
# Windows (PowerShell)
$env:DB_HOST = "localhost"
$env:DB_PORT = "5434"
$env:DB_NAME = "postgres"
$env:DB_USERNAME = "postgres"
$env:DB_PASSWORD = "password"

# Linux/Mac
export DB_HOST=localhost
export DB_PORT=5434
export DB_NAME=postgres
export DB_USERNAME=postgres
export DB_PASSWORD=password
```

### –ó–∞–ø—É—Å–∫

**–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```bash
mvn spring-boot:run
```

**Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
docker-compose up -d
```

**Docker (—Ä—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞):**
```bash
docker build -t investment-data-loader:latest .
docker run -p 8083:8083 -e T_INVEST_TOKEN=<–≤–∞—à_—Ç–æ–∫–µ–Ω> investment-data-loader:latest
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
curl http://localhost:8083/api/system/health

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
curl http://localhost:8083/api/instruments/count

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–∫—Ü–∏–π
curl http://localhost:8083/api/instruments/shares?exchange=MOEX&currency=RUB
```

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `docs/configuration.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: `docs/deployment.md` - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö
- **Docker —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: `docs/docker-development.md` - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å Docker
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `docs/database.md` - —Å—Ö–µ–º–∞ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏**: `docs/schedulers.md` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: `docs/TEST_DESCRIPTION.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: `docs/api/instruments.md` - —Ä–∞–±–æ—Ç–∞ —Å –∞–∫—Ü–∏—è–º–∏, —Ñ—å—é—á–µ—Ä—Å–∞–º–∏, –∏–Ω–¥–∏–∫–∞—Ç–∏–≤–∞–º–∏
- **–¶–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏**: `docs/api/main-session-prices.md` - —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è
- **–£—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Å—Å–∏—è**: `docs/api/morning-session.md` - –¥–∞–Ω–Ω—ã–µ —É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Å—Å–∏–∏
- **–í–µ—á–µ—Ä–Ω—è—è —Å–µ—Å—Å–∏—è**: `docs/api/evening-session.md` - –¥–∞–Ω–Ω—ã–µ –≤–µ—á–µ—Ä–Ω–µ–π —Å–µ—Å—Å–∏–∏
- **–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏**: `docs/api/last-trades.md` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–¥–µ–ª–∫–∞—Ö
- **–°–≤–µ—á–∏**: `docs/api/candles.md` - –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–≤–µ—á–µ–π
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: `docs/api/analytics.md` - –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- **–¢–æ—Ä–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**: `docs/api/trading.md` - —Ç–æ—Ä–≥–æ–≤—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ —Å—Ç–∞—Ç—É—Å—ã
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**: `docs/api/system.md` - —Å–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –î–∏–∞–≥—Ä–∞–º–º—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: `docs/diagrams/architecture.md` - –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö**: `docs/diagrams/data-flow.md` - —Å—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **InstrumentsController** - REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- **InstrumentService** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- **MarketDataService** - —Ä–∞–±–æ—Ç–∞ —Å —Ä—ã–Ω–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **TradingService** - —Ç–æ—Ä–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- **TInvestService** - —Ñ–∞—Å–∞–¥ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Spring Boot 3.x** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Spring Data JPA** - —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Tinkoff Invest API** - –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- **Spring Cache** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Maven** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–∞–±–æ—Ç–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–∞–∫—Ü–∏–∏, —Ñ—å—é—á–µ—Ä—Å—ã, –∏–Ω–¥–∏–∫–∞—Ç–∏–≤—ã) –∏–∑ Tinkoff API
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ FIGI –∏–ª–∏ —Ç–∏–∫–µ—Ä—É
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### –†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω –∑–∞–∫—Ä—ã—Ç–∏—è/–æ—Ç–∫—Ä—ã—Ç–∏—è
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–≤–µ—á–∏ –∏ —Å–¥–µ–ª–∫–∏
- ‚úÖ –ï–∂–µ–º–∏–Ω—É—Ç–Ω–∞—è –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ —Å–µ—Å—Å–∏—è–º (—É—Ç—Ä–µ–Ω–Ω—è—è, –æ—Å–Ω–æ–≤–Ω–∞—è, –≤–µ—á–µ—Ä–Ω—è—è)

### API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ RESTful API —Å JSON
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/OpenAPI)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üö¶ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

**–ü–æ—Ä—Ç**: 8083  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `localhost:5434/postgres`)  
**–¢–∞–π–º–∑–æ–Ω–∞**: Europe/Moscow  
**–í–µ—Ä—Å–∏—è Java**: 17+  

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Tinkoff Invest API](https://tinkoff.github.io/investAPI/)
- [Spring Boot Documentation](https://spring.io/projects/spring-boot)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Docker Documentation](https://docs.docker.com/)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Tinkoff API
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ API –≤ –ø–∞–ø–∫–µ `docs/api/`