# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

## –û–±–∑–æ—Ä

Investment Data Loader Service - —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Tinkoff Invest API —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ PostgreSQL. –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ REST API.

## üèóÔ∏è –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Tinkoff API   ‚îÇ    ‚îÇ   Application   ‚îÇ    ‚îÇ   PostgreSQL    ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ gRPC API      ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ ‚Ä¢ Spring Boot   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ ‚Ä¢ Instruments   ‚îÇ
‚îÇ ‚Ä¢ REST API      ‚îÇ    ‚îÇ ‚Ä¢ Controllers   ‚îÇ    ‚îÇ ‚Ä¢ Market Data   ‚îÇ
‚îÇ ‚Ä¢ WebSocket     ‚îÇ    ‚îÇ ‚Ä¢ Services      ‚îÇ    ‚îÇ ‚Ä¢ Analytics     ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ ‚Ä¢ Schedulers    ‚îÇ    ‚îÇ ‚Ä¢ Aggregations  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Controllers (–°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)
- **InstrumentsController** - REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- **CandlesMinuteController** - —Ä–∞–±–æ—Ç–∞ —Å –º–∏–Ω—É—Ç–Ω—ã–º–∏ —Å–≤–µ—á–∞–º–∏
- **CandlesDailyController** - —Ä–∞–±–æ—Ç–∞ —Å –¥–Ω–µ–≤–Ω—ã–º–∏ —Å–≤–µ—á–∞–º–∏
- **TradingController** - —Ç–æ—Ä–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- **SystemController** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **CacheController** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
- **MainSessionPricesController** - —Ü–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏
- **MorningSessionController** - —Ü–µ–Ω—ã —É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Å—Å–∏–∏
- **LastTradesController** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏

### 2. Services (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- **InstrumentService** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (–∞–∫—Ü–∏–∏, —Ñ—å—é—á–µ—Ä—Å—ã, –∏–Ω–¥–∏–∫–∞—Ç–∏–≤—ã)
- **TradingService** - —Ç–æ—Ä–≥–æ–≤—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ —Å—Ç–∞—Ç—É—Å—ã
- **MinuteCandleService** - —Ä–∞–±–æ—Ç–∞ —Å –º–∏–Ω—É—Ç–Ω—ã–º–∏ —Å–≤–µ—á–∞–º–∏
- **DailyCandleService** - —Ä–∞–±–æ—Ç–∞ —Å –¥–Ω–µ–≤–Ω—ã–º–∏ —Å–≤–µ—á–∞–º–∏
- **LastTradesService** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- **MainSessionPriceService** - —Ü–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏
- **MorningSessionService** - —Ü–µ–Ω—ã —É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Å—Å–∏–∏
- **CacheWarmupService** - –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- **CachedInstrumentService** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 3. Repositories (–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö)
- **ShareRepository** - —Ä–∞–±–æ—Ç–∞ —Å –∞–∫—Ü–∏—è–º–∏
- **FutureRepository** - —Ä–∞–±–æ—Ç–∞ —Å —Ñ—å—é—á–µ—Ä—Å–∞–º–∏
- **IndicativeRepository** - —Ä–∞–±–æ—Ç–∞ —Å –∏–Ω–¥–∏–∫–∞—Ç–∏–≤–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- **ClosePriceRepository** - —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è
- **OpenPriceRepository** - —Ü–µ–Ω—ã –æ—Ç–∫—Ä—ã—Ç–∏—è
- **MinuteCandleRepository** - –º–∏–Ω—É—Ç–Ω—ã–µ —Å–≤–µ—á–∏
- **DailyCandleRepository** - –¥–Ω–µ–≤–Ω—ã–µ —Å–≤–µ—á–∏
- **LastPriceRepository** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã
- **ClosePriceEveningSessionRepository** - —Ü–µ–Ω—ã –≤–µ—á–µ—Ä–Ω–µ–π —Å–µ—Å—Å–∏–∏
- **SharesAggregatedDataRepository** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–∫—Ü–∏–π
- **FuturesAggregatedDataRepository** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ—å—é—á–µ—Ä—Å–æ–≤
- **SystemLogRepository** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏

### 4. Schedulers (–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏)
- **CandleSchedulerService** - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–≤–µ—á–µ–π (1:10 –ú–°–ö)
- **MorningSessionScheduler** - —Ü–µ–Ω—ã —É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Å—Å–∏–∏ (1:50 –ú–°–ö)
- **EveningSessionSchedulerService** - —Ü–µ–Ω—ã –≤–µ—á–µ—Ä–Ω–µ–π —Å–µ—Å—Å–∏–∏ (1:40 –ú–°–ö)
- **ClosePriceSchedulerService** - —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è (1:30 –ú–°–ö)
- **LastTradesSchedulerService** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω)
- **VolumeAggregationSchedulerService** - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –æ–±—ä–µ–º–æ–≤ (2:00 –ú–°–ö)
- **InstrumentPreloadSchedulerService** - –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (0:45 –ú–°–ö)

### 5. External Clients
- **Tinkoff gRPC –∫–ª–∏–µ–Ω—Ç—ã** - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Tinkoff REST –∫–ª–∏–µ–Ω—Ç** - –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö API –≤—ã–∑–æ–≤–æ–≤

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
```
1. REST API –∑–∞–ø—Ä–æ—Å ‚Üí InstrumentsController
2. InstrumentsController ‚Üí InstrumentService
3. InstrumentService ‚Üí Tinkoff API (gRPC/REST)
4. InstrumentService ‚Üí Repository ‚Üí PostgreSQL
5. Repository ‚Üí InstrumentService ‚Üí Controller ‚Üí JSON –æ—Ç–≤–µ—Ç
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```
1. REST API –∑–∞–ø—Ä–æ—Å ‚Üí CandlesMinuteController/CandlesDailyController
2. Controller ‚Üí MinuteCandleService/DailyCandleService
3. Service ‚Üí Tinkoff API (gRPC)
4. Service ‚Üí Repository ‚Üí PostgreSQL
5. Repository ‚Üí Service ‚Üí Controller ‚Üí JSON –æ—Ç–≤–µ—Ç
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Schedulers)
```
1. Scheduler ‚Üí Service (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)
2. Service ‚Üí Tinkoff API (gRPC)
3. Service ‚Üí Repository ‚Üí PostgreSQL
4. Service ‚Üí SystemLogRepository (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
```

## üóÑÔ∏è –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- **ShareEntity** - –∞–∫—Ü–∏–∏
- **FutureEntity** - —Ñ—å—é—á–µ—Ä—Å—ã
- **IndicativeEntity** - –∏–Ω–¥–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **ClosePriceEntity** - —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è
- **OpenPriceEntity** - —Ü–µ–Ω—ã –æ—Ç–∫—Ä—ã—Ç–∏—è
- **MinuteCandleEntity** - –º–∏–Ω—É—Ç–Ω—ã–µ —Å–≤–µ—á–∏
- **DailyCandleEntity** - –¥–Ω–µ–≤–Ω—ã–µ —Å–≤–µ—á–∏
- **LastPriceEntity** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã
- **ClosePriceEveningSessionEntity** - —Ü–µ–Ω—ã –≤–µ—á–µ—Ä–Ω–µ–π —Å–µ—Å—Å–∏–∏
- **SharesAggregatedDataEntity** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–∫—Ü–∏–π
- **FuturesAggregatedDataEntity** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ—å—é—á–µ—Ä—Å–æ–≤
- **SystemLogEntity** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–≤—è–∑–∞–Ω—ã —Å —Ü–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ FIGI
- –°–≤–µ—á–∏ —Å–≤—è–∑–∞–Ω—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ FIGI
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ –∏ –≤—Ä–µ–º–µ–Ω–∏
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∞–Ω—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ FIGI

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Spring Cache** –¥–ª—è API –æ—Ç–≤–µ—Ç–æ–≤
- **Caffeine** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∫—ç—à
- **–ö—ç—à –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** - –∞–∫—Ü–∏–∏, —Ñ—å—é—á–µ—Ä—Å—ã, –∏–Ω–¥–∏–∫–∞—Ç–∏–≤—ã
- **TTL –∫—ç—à–∞** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- **–ü—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
- **@Async** –º–µ—Ç–æ–¥—ã –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **CompletableFuture** –¥–ª—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î
- **–ò–Ω–¥–µ–∫—Å—ã** –ø–æ FIGI, –¥–∞—Ç–µ, —Ç–∏–∫–µ—Ä—É
- **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–æ –¥–∞—Ç–∞–º –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- **–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** (batch_size=100)
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JPA

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Tinkoff API —Ç–æ–∫–µ–Ω** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- **Spring Validation** –¥–ª—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤** –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç** –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤

## üöÄ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Stateless** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–í–Ω–µ—à–Ω—è—è –ë–î** –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Load Balancer** –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—É–ª—ã** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **SLF4J + Logback** –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
- **–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

### Health Checks
- **Spring Actuator** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö API**

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü—Ä–æ—Ñ–∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π
- **application.properties** - –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **application-prod.properties** - –ø—Ä–æ–¥–∞–∫—à–Ω
- **application-test.properties** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **application-docker.properties** - Docker

### –í–Ω–µ—à–Ω—è—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- **Docker secrets** –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
- **Unit —Ç–µ—Å—Ç—ã** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Integration —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- **Component —Ç–µ—Å—Ç—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **Allure –æ—Ç—á–µ—Ç—ã** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –ø–æ —Ç–µ—Å—Ç–∞–º

### Test Containers
- **PostgreSQL** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- **–¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏** (application-test.properties, application-unit.properties)

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **–°–µ—Ä–≤–∏—Å—ã** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker
- **Multi-stage build** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–∞
- **Health checks** –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **Volume mapping** –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

### Kubernetes (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- **Deployment** –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Service** –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
- **ConfigMap** –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **Secret** –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API** —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤** –∫ –≤–Ω–µ—à–Ω–∏–º API
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** –∏ CPU
- **–†–∞–∑–º–µ—Ä –ë–î** –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞** (hit/miss ratio)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤**

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
- **SystemLogEntity** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Task ID** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–¥–∞—á
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏** - —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–°—Ç–∞—Ç—É—Å—ã –æ–ø–µ—Ä–∞—Ü–∏–π** - STARTED, PROCESSING, COMPLETED, FAILED

### –ê–ª–µ—Ä—Ç—ã
- **–û—à–∏–±–∫–∏ API** > 5%
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** > 5 —Å–µ–∫—É–Ω–¥
- **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î**
- **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤** Tinkoff API
- **–°–±–æ–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–µ–º**

## üîÑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
| –í—Ä–µ–º—è (–ú–°–ö) | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|-------------|----------|
| 00:45 | InstrumentPreloadSchedulerService | –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ |
| 01:00 | LastTradesSchedulerService | –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–¥–µ–ª–æ–∫ |
| 01:10 | CandleSchedulerService | –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤–µ—á–µ–π |
| 01:30 | ClosePriceSchedulerService | –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω –∑–∞–∫—Ä—ã—Ç–∏—è |
| 01:40 | EveningSessionSchedulerService | –¶–µ–Ω—ã –≤–µ—á–µ—Ä–Ω–µ–π —Å–µ—Å—Å–∏–∏ |
| 01:50 | MorningSessionScheduler | –¶–µ–Ω—ã —É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Å—Å–∏–∏ |
| 02:00 | VolumeAggregationSchedulerService | –ê–≥—Ä–µ–≥–∞—Ü–∏—è –æ–±—ä–µ–º–æ–≤ |

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
- **–ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è** - –≤—Å–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ Europe/Moscow
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π Task ID
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful handling —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
